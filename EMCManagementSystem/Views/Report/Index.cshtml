
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>原始记录</title>
    <link rel="stylesheet" href="~/Content/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/Content/css/font-awesome.min.css" />
    <link rel="stylesheet" href="~/Content/css/ace-fonts.css" />
    <link rel="stylesheet" href="~/Content/css/ace.min.css" id="main-ace-style" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="~/Content/css/ace-part2.min.css" />
    <![endif]-->
    <!--[if lte IE 9]>
      <link rel="stylesheet" href="~/Content/css/ace-ie.min.css" />
    <![endif]-->
    <script src="~/Content/js/ace-extra.min.js"></script>
    <!--[if lte IE 8]>
    <script src="~/Content/js/html5shiv.min.js"></script>
    <script src="~/Content/js/respond.min.js"></script>
    <![endif]-->
    <style type="text/css">
        .CSSearchTbl {
            border: 1px #008CD4 solid;
        }

            .CSSearchTbl thead {
            }

                .CSSearchTbl thead tr {
                }

                    .CSSearchTbl thead tr th {
                        text-align: left;
                        padding-left: 10px;
                    }

            .CSSearchTbl tbody {
            }

                .CSSearchTbl tbody tr {
                }

                    .CSSearchTbl tbody tr td {
                        padding: 10px;
                    }

                        .CSSearchTbl tbody tr td.right {
                            text-align: left;
                        }

                        .CSSearchTbl tbody tr td.left {
                            text-align: right;
                        }

        .table-responsive {
            display: none;
        }

        td {
            text-align: center !important;
            vertical-align: middle !important; /*设置垂直居中*/
        }

        th {
            text-align: center !important;
            vertical-align: middle !important; /*设置垂直居中*/
        }
    </style>
    <link rel="stylesheet" href="~/Content/css/jquery.paginate.css" />
    <link rel="stylesheet" href="~/Content/css/jquery.yhhDataTable.css" />

</head>
<body class="no-skin">
    <!-- #section:basics/navbar.layout -->
    <!-- /section:basics/navbar.layout -->
    <div class="main-container" id="main-container">


        <div class="main-content">

            <div class="page-content">

                <!-- /section:settings.box -->
                <div class="page-content-area">
                    <div class="row">

                        <div class="col-md-12">

                            <ul class="nav nav-tabs nav-tabs-justified">
                                <li class="active">
                                    <a href="#home-3" data-toggle="tab">
                                        <span class="visible-xs"><i class="fa-home"></i></span>
                                        <span class="hidden-xs">信息录入已完成</span>
                                    </a>
                                </li>
                                <li class="">
                                    <a href="#profile-3" data-toggle="tab">
                                        <span class="visible-xs"><i class="fa-user"></i></span>
                                        <span class="hidden-xs" style="color:red">信息录入未完成</span>
                                    </a>
                                </li>
                            </ul>

                            <div class="tab-content">
                                <div class="tab-pane active" id="home-3">

                                    <div class="row">
                                        <div class="col-xs-12">

                                            <div class="row">
                                                <div class="col-xs-12">

                                                    <div class="table-header">
                                                        新增数据信息记录
                                                    </div>

                                                    <table width="100%" class="CSSearchTbl" cellpadding="0" cellspacing="0">
                                                        <tr>
                                                            <td width="10%" class="left">汽车品牌：</td>
                                                            <td width="20%" class="right">
                                                                <input id="brand" type="text" size="16" style="width:100%" />
                                                            </td>

                                                            <td width="10%" class="left">试验分类：</td>
                                                            <td width="20%" class="right" style="position:relative;right:20px">
                                                                <select id="test">
                                                                    <option>《--未选择--》</option>
                                                                    <option>14023</option>
                                                                    <option>18387</option>
                                                                </select>
                                                            </td>
                                                            <td width="10%" class="left">任务号：</td>
                                                            <td width="20%" class="right">
                                                                <input id="taskNumber" type="text" size="16" style="width:100%" />
                                                            </td>
                                                            <td class="right" colspan="2">
                                                                <a href="/Report/InsertReport" class="btn btn-primary pull-left col-sm-12 tbl-search"><span>添加数据信息记录</span></a>

                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td width="10%" class="left">起始时间：</td>
                                                            <td width="20%" class="right">
                                                                <input id="TestTime" type="text" size="16" style="width:100%" />
                                                            </td>
                                                            <td width="10%" class="left">终止时间：</td>
                                                            <td width="20%" class="right">
                                                                <input id="TestTime2" type="text" size="16" style="width:100%" />
                                                            </td>
                                                            <td width="10%" class="left">VIN：</td>
                                                            <td width="20%" class="right">
                                                                <input id="VIN" type="text" size="16" style="width:100%" />
                                                            </td>
                                                            <td class="right" colspan="2">
                                                                <button class="btn btn-primary pull-left col-sm-12 tbl-search" data-dismiss="modal" onclick="search()">
                                                                    开始搜索
                                                                </button>
                                                            </td>
                                                        </tr>
                                                    </table>

                                                    <table id="sample-table-2" class="table table-striped table-bordered table-hover" data-toolbar="#toolbar"
                                                           data-pagination="true"
                                                           data-page-size="10">
                                                        <thead>
                                                            <tr>
                                                                @*<th width="5%">NO</th>*@
                                                                <th width="10%" data-field="category">类别</th>
                                                                <th width="10%" data-field="time">创建时间</th>
                                                                <th width="10%" data-field="brand">汽车品牌</th>
                                                                <th width="10%" data-field="taskNumber">任务号</th>
                                                                <th width="10%" data-field="VIN">VIN</th>
                                                                <th width="10%" data-field="ResultID">检验结果</th>
                                                                <th width="15%" data-field="operation">操作</th>
                                                            </tr>
                                                        </thead>

                                                        <tbody>
                                                        
                                                        </tbody>
                                                    </table>

                                                    <div class="modal-footer no-margin-top">


                                                    </div>

                                                </div>
                                            </div>
                                        </div><!-- /.col -->
                                    </div><!-- /.row -->
                                </div>
                                <div class="tab-pane" id="profile-3">
                                    <div class="row">
                                        <div class="col-xs-12">

                                            <div class="row">
                                                <div class="col-xs-12">

                                                    <div class="table-header">
                                                        新增数据信息记录
                                                    </div>

                                                    <table width="100%" class="CSSearchTbl" cellpadding="0" cellspacing="0">
                                                        <tr>
                                                            <td width="10%" class="left">汽车品牌：</td>
                                                            <td width="20%" class="right">
                                                                <input id="brand" type="text" size="16" style="width:100%" />
                                                            </td>

                                                            <td width="10%" class="left">试验分类：</td>
                                                            <td width="20%" class="right" style="position:relative;right:20px">
                                                                <select id="test">
                                                                    <option>《--未选择--》</option>
                                                                    <option>14023</option>
                                                                    <option>18387</option>
                                                                </select>
                                                            </td>
                                                            <td width="10%" class="left">任务号：</td>
                                                            <td width="20%" class="right">
                                                                <input id="taskNumber" type="text" size="16" style="width:100%" />
                                                            </td>
                                                            <td class="right" colspan="2">
                                                                <a href="/Report/InsertReport" class="btn btn-primary pull-left col-sm-12 tbl-search"><span>添加数据信息记录</span></a>

                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td width="10%" class="left">起始时间：</td>
                                                            <td width="20%" class="right">
                                                                <input id="TestTime" type="text" size="16" style="width:100%" />
                                                            </td>
                                                            <td width="10%" class="left">终止时间：</td>
                                                            <td width="20%" class="right">
                                                                <input id="TestTime2" type="text" size="16" style="width:100%" />
                                                            </td>
                                                            <td width="10%" class="left">VIN：</td>
                                                            <td width="20%" class="right">
                                                                <input id="VIN" type="text" size="16" style="width:100%" />
                                                            </td>
                                                            <td class="right" colspan="2">
                                                                <button class="btn btn-primary pull-left col-sm-12 tbl-search" data-dismiss="modal" onclick="search()">
                                                                    开始搜索
                                                                </button>
                                                            </td>
                                                        </tr>
                                                    </table>

                                                    <table id="sample-table-3" class="table table-striped table-bordered table-hover" data-toolbar="#toolbar"
                                                           data-pagination="true"
                                                           data-page-size="10">
                                                        <thead>
                                                            <tr>
                                                                @*<th width="5%">NO</th>*@
                                                                <th width="10%" data-field="category">类别</th>
                                                                <th width="10%" data-field="time">创建时间</th>
                                                                <th width="10%" data-field="brand">汽车品牌</th>
                                                                <th width="10%" data-field="taskNumber">任务号</th>
                                                                <th width="10%" data-field="VIN">VIN</th>
                                                                <th width="10%" data-field="ResultID">检验结果</th>
                                                                <th width="15%" data-field="operation">操作</th>
                                                            </tr>
                                                        </thead>

                                                        <tbody></tbody>
                                                    </table>

                                                    <div class="modal-footer no-margin-top">


                                                    </div>

                                                </div>
                                            </div>
                                        </div><!-- /.col -->
                                    </div><!-- /.row -->
                                </div>
                         
                            </div>


                        </div>
                    </div>
               
                </div><!-- /.page-content-area -->
            </div><!-- /.page-content -->
        </div><!-- /.main-content -->



        <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
            <i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
        </a>
    </div><!-- /.main-container -->
    <script src="~/Content/js/jquery-1.8.3.min.js"></script>
    <script src="~/assets/js/bootstrap.min.js"></script>
    @*<script src="~/Content/js/jquery.dataTables.min.js"></script>
    <script src="~/Content/js/jquery.paginate.js"></script>
    <script src="~/Content/js/jquery.yhhDataTable.js"></script>*@
    <script src="~/assets/js/dist/bootstrap-table.min.js"></script>
    <script src="~/assets/js/dist/locale/bootstrap-table-zh-CN.js"></script>

  @*datetime控件*@
    <link href="~/BootStrap/css/bootstrap-datetimepicker.min.css" rel="stylesheet" />
    <script src="~/BootStrap/js/bootstrap-datetimepicker.min.js"></script>
    <script src="~/BootStrap/js/moment-with-locales(1).js"></script>
    <script src="~/BootStrap/js/bootstrap-datetimepicker.zh-CN.js"></script>


    <script type="text/javascript">
        function sele() {
            $.getJSON("/Report/SelectReport", function (data) {
                for (i = 0; i < data.length ; i++) {
                    data[i].operation = '<div class="btn-group"><button class="btn btn-xs btn-info" onclick="edit(' + data[i].OriginalRecordID + ')"><i class="ace-icon fa fa-pencil bigger-120"></i>查看</button><button class="btn btn-xs btn-danger" onclick="deleteRow(' + data[i].OriginalRecordID + ')"><i class="ace-icon fa fa-trash-o bigger-120"></i>删除</button></div>';
                   
                }
                $("#sample-table-2").bootstrapTable("load", data);
            })
        }
        $(function () {
            $('#TestTime').datetimepicker({
                language: 'zh-CN',//显示中文
                format: 'yyyy-mm-dd',//显示格式
                minView: "month",//设置只显示到月份
                initialDate: new Date(),
                autoclose: true,//选中自动关闭
                todayBtn: true,//显示今日按钮
                locale: moment.locale('zh-cn')
            });
            $('#TestTime2').datetimepicker({
                language: 'zh-CN',//显示中文
                format: 'yyyy-mm-dd',//显示格式
                 minView: "month",//设置只显示到月份
                initialDate: new Date(),
                autoclose: true,//选中自动关闭
                todayBtn: true,//显示今日按钮
                locale: moment.locale('zh-cn')
            });
           
            $("#sample-table-2").bootstrapTable({
                //url: "/DataManagement/JsfzrCjdrw",
                onClickRow: function (a, b) {
                    $("#sample-table-2 tr.focus").removeClass("focus");
                    $(b).addClass("focus");
                    //rowTaskID.value = a.TaskID;
                    //rowStateID.value = a.StateID;
                   // checkTaskPass(a.TaskID);
                }
            });
            sele();
            $("#sample-table-3").bootstrapTable({
                //url: "/DataManagement/JsfzrCjdrw",
                onClickRow: function (a, b) {
                    $("#sample-table-3 tr.focus").removeClass("focus");
                    $(b).addClass("focus");
                    //rowTaskID.value = a.TaskID;
                    //rowStateID.value = a.StateID;
                    // checkTaskPass(a.TaskID);
                }
            });
            $.getJSON("/Report/SelectReport2", function (data) {
                for (i = 0; i < data.length ; i++) {
                    data[i].operation = '<div class="btn-group"><button class="btn btn-xs btn-info" onclick="edit(' + data[i].OriginalRecordID + ')"><i class="ace-icon fa fa-pencil bigger-120"></i>查看</button><button class="btn btn-xs btn-danger" onclick="deleteRow(' + data[i].OriginalRecordID + ')"><i class="ace-icon fa fa-trash-o bigger-120"></i>删除</button></div>';

                }
                $("#sample-table-3").bootstrapTable("load", data);
            })
        })
        function edit(t) {
            window.location.href = "/Report/updateReport_Continue?id=" + t;
          //  alert("编辑了第"+(t+1)+"行，但是还并不能显示！  ~(￣▽￣)~")
        }
        function ConvertToDate1(sourceDate) {
            sourceDate = sourceDate.replace("/Date(", "").replace(")/", "");
            sourceDate = sourceDate.substr(0, sourceDate.length - 3);
            sourceDate = Number(sourceDate) * 1000;
            var dateObj = new Date(sourceDate);
            var UnixTimeToDate = dateObj.getFullYear() + '-' + (dateObj.getMonth() + 1) + '-' + dateObj.getDate();
            return UnixTimeToDate;
        }
        function search() {
         
            var brand = document.getElementById("brand").value;
            var test = document.getElementById("test").value;
            var TestTime = document.getElementById("TestTime").value;
            var TestTime2 = document.getElementById("TestTime2").value;
            var taskNumber = document.getElementById("taskNumber").value;
            var VIN = document.getElementById("VIN").value;
            $.ajax({

                type: "post",

                url: "/Report/SelectReport_combination",

                cache: false,

                async: true,
                data: { brand: brand, test: test, TestTime: TestTime, TestTime2: TestTime2, taskNumber: taskNumber, VIN: VIN },
                success: function (data) {
          
                    for (i = 0; i < data.length ; i++) {
                        data[i].operation = '<div class="btn-group"><button class="btn btn-xs btn-info" onclick="edit(' + data[i].OriginalRecordID + ')"><i class="ace-icon fa fa-pencil bigger-120"></i>查看</button><button class="btn btn-xs btn-danger" onclick="deleteRow(' + data[i].OriginalRecordID + ')"><i class="ace-icon fa fa-trash-o bigger-120"></i>删除</button></div>';
                        data[i].time = ConvertToDate1(data[i].time);
                    }
                    $("#sample-table-2").bootstrapTable("load", data);
                }
            });
        
        }
        function deleteRow(t) {
            if (window.confirm('是否确定删除？'))
            {
                $.getJSON("/Report/DelectReport?OriginalRecordID=" + t, function (data) {
                    $.getJSON("/Report/SelectReport", function (data) {
           
                   
                        $.getJSON("/Report/SelectReport", function (data) {
                            for (i = 0; i < data.length ; i++) {
                                data[i].operation = '<div class="btn-group"><button class="btn btn-xs btn-info" onclick="edit(' + data[i].OriginalRecordID + ')"><i class="ace-icon fa fa-pencil bigger-120"></i>查看</button><button class="btn btn-xs btn-danger" onclick="deleteRow(' + data[i].OriginalRecordID + ')"><i class="ace-icon fa fa-trash-o bigger-120"></i>删除</button></div>';

                            }
                            $("#sample-table-2").bootstrapTable("load", data);
                        })
                    })
                })

            } else {
                alert("取消的删除！！");
            }

        }
      
    </script>
</body>
</html>
